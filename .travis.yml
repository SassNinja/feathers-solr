language: node_js
node_js: 'node'
before_install:
  - rm -rf ~/.linuxbrew
  - yes | ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/linuxbrew/go/install)"
  - export PATH="$HOME/.linuxbrew/bin:$PATH"
  - export MANPATH="$HOME/.linuxbrew/share/man:$MANPATH"
  - export INFOPATH="$HOME/.linuxbrew/share/info:$INFOPATH"
  - brew install jdk
  - export JAVA_HOME=/home/travis/.linuxbrew/Cellar/jdk/1.8.0-40
before_script:
  - java -version
  - npm install -g istanbul
  - npm install -g mocha
script:
  - bin/./install-solr.sh
  - npm test
after_success:
  - cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js